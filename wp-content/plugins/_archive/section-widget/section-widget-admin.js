var swtTabsOptions={panelTemplate:'<div><div class="olt-swt-designer-top"><label for="#{idprefix}-#{tabid}-title">Title:</label> <input id="#{idprefix}-#{tabid}-title" class="olt-swt-designer-tab-title" name="#{nameprefix}[#{tabid}][title]" type="text" value="New Tab" /> <p class="olt-swt-designer-tabs-controls olt-swt-designer-delete-tab"><a href="#"><span class="ui-icon ui-icon-trash" style="float:left;margin-right:.3em;margin-top: -2px;"></span>Delete this tab</a></p></div><div class="olt-sw-body"><p class="olt-sw-body-help"><strong>Formatting Help:</strong> You may use HTML in this widget, and it is probably a good idea to wrap the content in your own <code>&lt;div&gt;</code> to aid styling. Shortcodes are also allowed, but please beware not all of them will function properly on archive pages.</p><textarea  rows="16" cols="20" name="#{nameprefix}[#{tabid}][body]"></textarea></div>',tabTemplate:'<li class="olt-swt-designer-tab" id="#{idprefix}-id-#{tabid}"><a href="#{href}" id="#{idprefix}-#{tabid}-title-link">#{label}</a></li>',add:function(d,f){var e=jQuery;var c=e(this).tabs();var g=c.parent().siblings("input[name=idprefix]:first").val();var b=c.parent().siblings("input[name=nameprefix]:first").val();var a=c.data("inc");e(f.tab).parent().attr("id",e(f.tab).parent().attr("id").replace(/#\{idprefix\}/g,g).replace(/#\{nameprefix\}/g,b).replace(/#\{tabid\}/g,a));e(f.tab).attr("id",e(f.tab).attr("id").replace(/#\{idprefix\}/g,g).replace(/#\{nameprefix\}/g,b).replace(/#\{tabid\}/g,a));e(f.panel).html(e(f.panel).html().replace(/#\{idprefix\}/g,g).replace(/#\{nameprefix\}/g,b).replace(/#\{tabid\}/g,a));e(".olt-swt-designer-tab-title",f.panel).bind("change",function(){var h=e(this).val();var i=e(this).attr("id");e("#"+i+"-link").text(h)});e(this).find(".olt-swt-designer-add-tab:first").remove().appendTo(e(".ui-tabs-nav",this));c.tabs("select",f.index)},selected:0};var swtSortableOptions={axis:"x",items:"li:not(.olt-swt-designer-tabs-controls)",update:function(){var a=jQuery;var b=a(this).parents(".olt-swt-designer-wrapper:first").siblings(".olt-swt-order:first");b.val(a(this).sortable("serialize",{key:"order"}))}};function OLTSWTInit(a){var b=jQuery;if(typeof(a)=="undefined"){a=b(".olt-swt-designer-main")}a.tabs(swtTabsOptions).find(".ui-tabs-nav").sortable(swtSortableOptions);a.each(function(c,f){if(typeof(b(f).data("inc"))=="undefined"){var d=b(f).tabs("length");b(f).data("inc",d)}});b(".olt-swt-designer-tab-title",a).bind("change",function(){var c=b(this).val();var d=b(this).attr("id");b("#"+d+"-link").text(c)});return a}jQuery(document).ready(function(b){OLTSWTInit();b(".olt-swt-designer-add-tab>a").live("click",function(){var c=OLTSWTInit(b(this).parents(".olt-swt-designer-main:first"));var e=c.siblings("input[name=idprefix]:first").val();var d=c.data("inc");c.tabs("add","#"+e+"-tab-"+d,"New Tab");c.data("inc",d+1);return false});b(".olt-swt-designer-delete-tab>a").live("click",function(){var d=b(this).parents(".olt-swt-designer-main:first").tabs();var c=d.tabs("option","selected");c=(c<0)?0:c;d.tabs("remove",c);return false});b("head").append('<link id="swt-preview-style" rel="stylesheet" href="" type="text/css" media="all" />');var a=b("#swt-preview-style");b("#swt-theme-preview-wrapper").tabs();b("#swt-theme").change(function(){if(b(this).val()=="none"){a.attr("href","")}else{a.attr("href",stylesheet_url+"?theme="+b(this).val()+"&scope=%23swt-theme-preview")}}).change();b("#swt-theme-preview-link").click(function(){b("#swt-theme-preview").slideDown();return false});b("#swt-theme-preview-hide-link").click(function(){b("#swt-theme-preview").slideUp();return false});b("#swt-scope-help-link").click(function(){b("#swt-scope-help").slideDown();return false});b("#swt-scope-help-hide-link").click(function(){b("#swt-scope-help").slideUp();return false});b("#swt-scope-detect").click(function(){b(this).hide();b("body").append('<iframe id="swt-scope-detect-iframe" style="display:none" />');var e=b("#swt-scope-detect-iframe");var d=b(this).siblings("#swt-scope-detect-message").empty().show();var f;var h;var g=function(){d.append('<div class="message">Initializing scope detect...</div>');if(typeof(links)=="undefined"||links.length<1){d.append('<div class="error">Cannot find JavaScript variable "links"...</div>');i();return false}f=[];h=links.slice();e.unbind("load");c()};var c=function(k){if(typeof(k)!="undefined"){var j=b(this).contents().find(".swt-wrapper");var l=false;if(j.length<1){d.append('<div class="warning">No widget instances found, skipping...</div>')}else{if(j.length<2){d.append('<div class="warning">Only one widget instance found, this might lead to inaccurate result...</div>');l=true}j.each(function(){var m=b(this).parents();var n=[];m.each(function(){var o=b(this).attr("id");if(o!=""){n.push(o)}});if(l){n.shift()}f.push(n)})}}if(h.length<1){i()}else{link=h.pop();d.append('<div class="message">Trying '+link+" ...</div>");e.attr("src",link).load(c)}};var i=function(){if(f.length<1){d.append('<div class="error">Scope detection has failed. Your settings are unchanged.</div>')}else{var l=f.shift();var k=[];for(var o=0;o<l.length;o++){var p=true;var n=l[o];for(var m=0;m<f.length;m++){if(b.inArray(n,f[m])==-1){p=false;break}}if(p){k.push("#"+n)}}k.reverse().push(".swt-outter");b("#swt-scope").val(k.join(" "));d.append('<div class="success">Scope detection has completed. Your optimal CSS scope is <strong>&quot;'+k.join(" ")+"&quot;</strong> and it has been filled in for you.<br /><strong>Don't forget to save your changes!</strong></div>")}b("#swt-scope-detect").show()};g(e,d);return false})});